/* ---------------- Import Better Roam Research as base style --------------- */

@import url('https://linuz90.github.io/better-roam-research/main.css');

/* --------------------------------- Mixins --------------------------------- */

$font-size: 17px;

$scene-icon: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHRpdGxlPmxvZ2luLTI8L3RpdGxlPjxwYXRoIGQ9Ik0yMC4yNSwxLjVoLTcuNVYuNWEuNS41LDAsMCwwLS42MDgtLjQ4OGwtOSwyQS41LjUsMCwwLDAsMi43NSwyLjV2MTlhLjUuNSwwLDAsMCwuMzkyLjQ4OGw5LDJhLjUuNSwwLDAsMCwuNjA4LS40ODh2LTFoNy41YTEsMSwwLDAsMCwxLTFWMi41QTEsMSwwLDAsMCwyMC4yNSwxLjVabS0xMCwxMUExLjUsMS41LDAsMSwxLDguNzUsMTEsMS41LDEuNSwwLDAsMSwxMC4yNSwxMi41Wm04LjUsOGgtNS41YS41LjUsMCwwLDEtLjUtLjVWNGEuNS41LDAsMCwxLC41LS41aDUuNWEuNS41LDAsMCwxLC41LjVWMjBBLjUuNSwwLDAsMSwxOC43NSwyMC41WiIvPjwvc3ZnPg==';
$description-icon: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHRpdGxlPnF1aWxsLWNpcmNsZTwvdGl0bGU+PHBhdGggZD0iTTEzLjQ3NiwxMy4yNDRhLjc1Ljc1LDAsMCwxLC43NS0uNzVoNi4wODZhLjI1NC4yNTQsMCwwLDAsLjIwNy0uMTA3YzMuMDU3LTQuMjQ5LDQuNDA2LTguOTI0LDIuMDc1LTExLjI1OWEuNS41LDAsMCwwLS43LDAsLjQ1My40NTMsMCwwLDAtLjA1NC4wNjJsLTQuNjg4LDQuNjlhLjI1MS4yNTEsMCwwLDEtLjQyNy0uMTc3Vi45OTRBLjUuNSwwLDAsMCwxNiwuNTQ2LDMwLjA4NCwzMC4wODQsMCwwLDAsOC44LDZhMjMuMjUsMjMuMjUsMCwwLDAtNS4zNjgsNy45OTRjLS44MDgsMi4xNzEtLjkxLDQuMDA5LS4zNDEsNS4yNDZMLjUxOSwyMS44MDVhMSwxLDAsMCwwLDAsMS40MTQsMS4wMTUsMS4wMTUsMCwwLDAsMS40MTQsMGwyLjU1Ni0yLjU1NWE1LjUsNS41LDAsMCwwLDIuNDI1LjVBMTQuMjU0LDE0LjI1NCwwLDAsMCwxNS4xLDE3Ljk0N2EuMjUzLjI1MywwLDAsMC0uMTU0LS40NTNIOS43MjZhLjc1Ljc1LDAsMSwxLDAtMS41aDcuNTZhLjI1OC4yNTgsMCwwLDAsLjE3OC0uMDcyYy41LS40ODUuOTgzLS45OTEsMS40NDItMS41MTFhLjI1My4yNTMsMCwwLDAtLjE5Mi0uNDE3SDE0LjIyNkEuNzUuNzUsMCwwLDEsMTMuNDc2LDEzLjI0NFoiLz48L3N2Zz4=';
$character-icon: 'data:image/svg+xml;base64,PHN2ZyBpZD0iQm9sZCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjx0aXRsZT5zaW5nbGUtbWFuLWNpcmNsZTwvdGl0bGU+PHBhdGggZD0iTTEyLDBBMTIsMTIsMCwxLDAsMjQsMTIsMTIuMDEzLDEyLjAxMywwLDAsMCwxMiwwWm0wLDIyYTkuOTU4LDkuOTU4LDAsMCwxLTYuNTU0LTIuNDU2LjUuNSwwLDAsMSwuMTI2LS44MzRjLjktLjQsMS45NDctLjc3OSwyLjk3OS0xLjE1Mi4zNzYtLjEzNy43NTEtLjI3MywxLjExOC0uNDA5YS4yNTEuMjUxLDAsMCwwLC4xNjMtLjIzNVYxNS4xNzVhLjI0OS4yNDksMCwwLDAtLjExOS0uMjEyLDMuMDc0LDMuMDc0LDAsMCwxLTEuMy0yLjYxMy4yNS4yNSwwLDAsMC0uMTItLjIsMS4yNTMsMS4yNTMsMCwwLDEtLjQ4My0xLjEwOCwxLjMxNiwxLjMxNiwwLDAsMSwuNDEtMS4wNTZBLjI0OS4yNDksMCwwLDAsOC4zLDkuNzIzYy0uMjUzLS45MDktLjYtMi4yNzQuMDExLTIuOTM3YTEuMTc4LDEuMTc4LDAsMCwxLC45NjUtLjM0LjI0OS4yNDksMCwwLDAsLjIyOC0uMTI1Yy41LS44NzIsMS45MDgtMS4yNjYsMy4yMDctMS4yNjYsMS40NjcsMCwzLjA3MS41LDMuMzUxLDEuNjI0YTUuODUzLDUuODUzLDAsMCwxLS4zNiwzLjA0NS4yNS4yNSwwLDAsMCwuMDgxLjI3LDEuMzI4LDEuMzI4LDAsMCwxLC40LDEuMDQ5QTEuMjUyLDEuMjUyLDAsMCwxLDE1LjcsMTIuMTVhLjI0OS4yNDksMCwwLDAtLjEyMS4yLDMuMDcyLDMuMDcyLDAsMCwxLTEuMzA1LDIuNjE0LjI0OS4yNDksMCwwLDAtLjExOS4yMTJ2MS43MzlhLjI0OC4yNDgsMCwwLDAsLjE2NC4yMzRjLjQwNy4xNTEuODEyLjMsMS4yMDkuNDQxLDEuMDc4LjM5LDIuMDcxLjc0OSwyLjksMS4xMTNhLjUuNSwwLDAsMSwuMTI4LjgzNUE5Ljk1OCw5Ljk1OCwwLDAsMSwxMiwyMloiLz48L3N2Zz4=';
$dialog-icon: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHRpdGxlPm1lc3NhZ2VzLWJ1YmJsZS1kb3VibGU8L3RpdGxlPjxwYXRoIGQ9Ik0xNi4zLDguNTEyYTkuMTIsOS4xMiwwLDAsMSwxLjM3LjEwNS4yNTEuMjUxLDAsMCwwLC4yODUtLjIxOEE1LjU2Nyw1LjU2NywwLDAsMCwxOCw3Ljc1MUMxOCwzLjc1NCwxNC4wNzUuNSw5LjI1LjVTLjUsMy43NTQuNSw3Ljc1MUE2LjU1Niw2LjU1NiwwLDAsMCwyLjc0NiwxMi42bC0xLjcsMi45NzhhLjUuNSwwLDAsMCwuNjIuNzEzTDYuMSwxNC41MTZhMTAuMTEzLDEwLjExMywwLDAsMCwxLjQyMi4zNC4yNS4yNSwwLDAsMCwuMjg0LS4xODdDOC42NTUsMTEuMiwxMi4yLDguNTEyLDE2LjMsOC41MTJaIi8+PHBhdGggZD0iTTE2LjMsMTAuMDEyYy0zLjksMC03LjIsMi44NTctNy4yLDYuMjM5YTYuMjQsNi4yNCwwLDAsMCwyLjk1OCw1LjE4MSw3LjE1Nyw3LjE1NywwLDAsMCw2LjY0Mi42MThsMy41ODUsMS40MTdhLjU1Ny41NTcsMCwwLDAsLjY3Ni0uNzQzbC0uODM0LTIuOTUxQTUuMTc1LDUuMTc1LDAsMCwwLDIzLjUsMTYuMjUxQzIzLjUsMTIuODY5LDIwLjIsMTAuMDEyLDE2LjMsMTAuMDEyWiIvPjwvc3ZnPg==';
$parenthetical-icon: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHRpdGxlPm1lc3NhZ2VzLWJ1YmJsZS1zcXVhcmUtdHlwaW5nPC90aXRsZT48cGF0aCBkPSJNMjIsMS41SDJBMS41LDEuNSwwLDAsMCwuNSwzVjE2LjU1MkExLjQ1OSwxLjQ1OSwwLDAsMCwyLDE4SDV2NGEuNS41LDAsMCwwLC43ODUuNDExTDEyLjE1NiwxOEgyMmExLjUsMS41LDAsMCwwLDEuNS0xLjVWM0ExLjUsMS41LDAsMCwwLDIyLDEuNVpNMTksMTBhMS41LDEuNSwwLDEsMS0xLjUtMS41QTEuNSwxLjUsMCwwLDEsMTksMTBaTTUsMTBhMS41LDEuNSwwLDEsMSwxLjUsMS41QTEuNSwxLjUsMCwwLDEsNSwxMFptNS41LDBBMS41LDEuNSwwLDEsMSwxMiwxMS41LDEuNSwxLjUsMCwwLDEsMTAuNSwxMFoiLz48L3N2Zz4=';

@mixin tooltipBackground($hue, $icon) {
  color: black;
  background: hsl($hue, 85%, 85%) url($icon);
  background-size: 20px 20px;
  background-position: 13px center;
  background-repeat: no-repeat;
  // border: 1.5px solid hsl($hue, 00%, 87%);
  @media (prefers-color-scheme: dark) {
    filter: invert(0.8) brightness(1.3) hue-rotate(180deg) saturate(1.5);
    // color: hsl($hue, 50%, 55%);
    // background: hsl($hue, 50%, 8%);
    // border: 1.5px solid hsl($hue, 50%, 15%);
  }
}

@mixin tooltip($text, $hue, $icon) {
  > .controls + div:not(.rm-block-text),
  > .controls + h1 > div:not(.rm-block-text) {
    position: relative;
    &:after {
      content: $text;
      display: block;
      position: fixed;
      bottom: 8px;
      left: 40%;
      padding: 8px 16px 9px 44px;
      border-radius: 30px;
      font-weight: 600;
      text-align: center;
      font-size: 16px !important;
      z-index: 999;
      @include tooltipBackground($hue, $icon);
    }
  }
}

@mixin styleBlock($text, $icon, $hue, $bottom, $top) {
  > div:not(.dnd-drop-area) {
    max-width: 660px !important;
  }
  > .rm-block-text > span,
  > h1,
  > div > textarea {
    @content;
    &:hover {
      background: var(--main-background-color);
      border-radius: 3px !important;
    }
    &:empty:after {
      content: '[#{$text}]';
      color: var(--font-color-placeholder);
    }
    &:empty {
      content: '[#{$text}]';
      color: var(--font-color-placeholder);
    }
  }
  &:not(.dnd-separator) {
    margin-bottom: $bottom;
    margin-top: $top;
    @include tooltip($text, $hue, $icon);
  }
}

/* ------------------------------ General Style ----------------------------- */

span,
textarea,
.rm-title-display,
.rm-block-text {
  font-family: 'Courier Prime', 'Courier New', Courier, monospace !important;
  line-height: 20px !important;
  font-size: $font-size !important;
}
textarea {
  line-height: 23px !important;
}
.rm-title-display,
.rm-title-textarea {
  span {
    font-size: 22px !important;
  }
  font-size: 22px !important;
}
.rm-level1 {
  div,
  textarea {
    font-size: $font-size !important;
  }
}

.bp3-menu {
  font-size: 14px !important;
}

/* ---------------------------- Screenplay Style ---------------------------- */

.roam-article.screenplay {
  .rm-title-display,
  .rm-title-textarea {
    text-align: center !important;
  }
  .roam-block {
    min-height: $font-size !important;
    margin-top: 0px !important;
  }
  .rm-block-text {
    padding-top: 0 !important;
    padding-bottom: 0 !important;
  }
  .rm-block-input {
    margin-top: 0px !important;
  }
  .block-bullet-view {
    margin-bottom: 0px !important;
    .block-border-left {
      border-left: none !important;
      padding-left: 1px !important;
    }
    > div > div > .controls {
      opacity: 0;
    }
    &:hover {
      > div > div > .controls {
        opacity: 1;
      }
    }
  }
  .controls {
    flex: 0 0 30px !important;
    padding-left: 0px !important;
    padding-top: 0px !important;
    padding-bottom: 0px !important;
  }
  .block-bullet-view {
    margin-left: 0px !important;
  }

  /* ---------------------------------- Scene --------------------------------- */

  > div > div > div > div > div:first-child {
    @include styleBlock('Scene', $scene-icon, 0, $font-size, 0) {
      font-weight: 600 !important;
    }
  }

  /* ------------------------------- Description ------------------------------ */

  .block-bullet-view > div {
    margin-left: 0px !important;
  }
  > div > div > div > div > div > div > div:first-child {
    @include styleBlock('Description', $description-icon, 30, $font-size, 0);
  }

  /* ------------------------------- Characters ------------------------------- */

  > div > div > div > div > div > div > div > div > div:first-child {
    @include styleBlock('Character', $character-icon, 220, 0, 0) {
      text-align: center !important;
      display: block;
    }
  }

  /* --------------------------------- Dialog --------------------------------- */

  > div > div > div > div > div > div > div > div > div > div > div:first-child {
    @include styleBlock('Dialog', $dialog-icon, 180, $font-size, 0) {
      margin: 0 auto !important;
      width: 360px !important;
      max-width: 100% !important;
      display: block !important;
    }
  }

  /* ------------------------------ Paranthetical ----------------------------- */

  > div > div > div > div > div > div > div > div > div > div > div > div > div:first-child {
    @include styleBlock('Parenthetical', $parenthetical-icon, 50, $font-size, -#{$font-size}) {
      display: block !important;
      text-align: center;
    }
  }
}
